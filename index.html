<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>¬°S√∫per Rifa del Oso!</title>
  <meta name="description" content="Rifa organizada por Yurany y Majo. Juega el 5 de septiembre con las 2 √∫ltimas cifras de la Loter√≠a de Medell√≠n. Publicaremos aqu√≠ el n√∫mero ganador durante una semana." />
  <style>
    /* =====================
       Variables de tema
       ===================== */
    :root{
      /* --- LIGHT --- */
      --bg:#fff7f7;         /* page background */
      --bg2:#ffffff;        /* secondary background */
      --ink:#25314a;        /* main text */
      --muted:#6b7280;      /* muted text */
      --brand:#ff4b6e;      /* pink */
      --brand2:#7c3aed;     /* violet */
      --ok:#16a34a;         /* green */
      --card:#ffffff;       /* card surface */
      --bd:#e9edf2;         /* borders */
      --pick:#ffe7ee;       /* picked bg */
      --pickbd:#ffc9d7;     /* picked border */
      --soldbg:#f7f8fb;     /* sold cell bg */
    }
    :root[data-theme="dark"]{
      /* --- DARK --- */
      --bg:#0b1020;
      --bg2:#0f172a;
      --ink:#e5e7eb;
      --muted:#94a3b8;
      --brand:#ff4b6e;
      --brand2:#7c3aed;
      --ok:#16a34a;
      --card:#121a2f;
      --bd:#23314f;
      --pick:#2a1530;
      --pickbd:#ff7590;
      --soldbg:#0b1222;
    }

    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);background:
      radial-gradient(1200px 700px at -10% -20%, rgba(255,75,110,.10) 0%, transparent 60%),
      radial-gradient(900px 600px at 110% 10%, rgba(124,58,237,.10) 0%, transparent 60%),
      var(--bg)}
    header{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#fff}
    .wrap{max-width:980px;margin:auto;padding:18px}
    .title{font-weight:900;font-size:clamp(26px,5vw,40px);letter-spacing:.3px}
    .sub{opacity:.95}

    .hero{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin:18px auto}
    .hero img{width:calc(50% - 6px);max-width:180px;height:auto;border-radius:16px;border:1px solid var(--bd);box-shadow:0 8px 22px rgba(2,6,23,.15)}
    @media (min-width:600px){.hero img{width:180px}}

    .card{background:var(--card);border:1px solid var(--bd);border-radius:18px;box-shadow:0 10px 30px rgba(2,6,23,.20);padding:16px}
    .legend{display:flex;gap:16px;justify-content:center;color:var(--muted);font-size:14px;margin-top:4px}

    .board{--cols:10;display:grid;grid-template-columns:repeat(var(--cols),1fr);gap:6px;max-width:540px;margin:14px auto}
    .cell{position:relative;aspect-ratio:1;display:grid;place-items:center;border:1px solid var(--bd);border-radius:10px;background:var(--bg2);color:var(--ink);font-weight:800;font-size:clamp(11px,3.2vw,16px);cursor:pointer;transition:transform .1s, box-shadow .1s, background .15s, border-color .15s}
    .cell:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(2,6,23,.15)}
    .cell.sold{cursor:not-allowed;color:#7b8696;background:var(--soldbg)}
    .cell.sold::after{content:"üêª";position:absolute;inset:0;display:grid;place-items:center;font-size:18px;opacity:.9}
    .cell.picked{background:var(--pick);border-color:var(--pickbd)}

    .chosen{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:8px 0}
    .chip{background:var(--bg2);border:1px solid var(--pickbd);color:#b4234d;padding:6px 10px;border-radius:999px;font-weight:800}

    .cta{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:10px 0}
    .btn{border:none;padding:10px 14px;border-radius:12px;font-weight:900;cursor:pointer}
    .btn.whats{background:linear-gradient(90deg,#22c55e,var(--ok));color:#fff}
    .btn.clear{background:transparent;border:1px solid var(--bd);color:var(--ink)}
    .btn.random{background:linear-gradient(90deg,#38bdf8,#6366f1);color:#0b1020}
    .btn.theme{background:#fff0;border:1px solid rgba(255,255,255,.5);color:#fff}

    .note{color:var(--muted)}
    footer{padding:18px 12px;text-align:center;color:var(--muted)}

    /* Toast / announcer */
    .toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:var(--soldbg);border:1px solid var(--bd);color:var(--ink);padding:10px 14px;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,.25);opacity:0;pointer-events:none;transition:opacity .2s, transform .2s}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-4px)}

    /* Theme toggle container */
    .header-actions{display:flex;gap:8px;align-items:center;justify-content:flex-end}
    .toggle{appearance:none;width:52px;height:30px;border:1px solid var(--bd);border-radius:999px;background:var(--bg2);position:relative;cursor:pointer;outline:none}
    .toggle:before{content:"";position:absolute;top:3px;left:3px;width:24px;height:24px;border-radius:50%;background:linear-gradient(180deg,#fff,#eee);transition:left .2s}
    html[data-theme="dark"] .toggle:before{left:25px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div style="display:flex;align-items:center;gap:12px;justify-content:space-between;flex-wrap:wrap">
        <div>
          <div class="title">¬°S√∫per Rifa del Oso!</div>
          <div class="sub">Organizada por <b>Yurany y Majo</b>. Juega el <b>5 de septiembre</b> con las <b>2 √∫ltimas cifras</b> de la Loter√≠a de Medell√≠n. Publicaremos aqu√≠ el n√∫mero ganador por una semana.</div>
        </div>
        <div class="header-actions">
          <label style="font-size:12px;opacity:.9">Claro</label>
          <input id="themeToggle" class="toggle" type="checkbox" aria-label="Cambiar entre modo claro y oscuro">
          <label style="font-size:12px;opacity:.9">Oscuro</label>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="hero">
        <img src="rifa_oso.jpg" alt="Oso en rifa (JPG)" />
        <img src="rifa_oso.png" alt="Oso en rifa (PNG)" />
      </div>

      <div class="legend"><span>‚¨ú Disponible</span><span>üêª Vendido</span><span>üíñ Seleccionado</span></div>

      <ol style="max-width:560px;margin:10px auto 0;padding-left:18px;text-align:left;color:var(--muted);font-size:14px;line-height:1.45">
        <li>Toca los n√∫meros <b>disponibles</b> para seleccionarlos (se ponen en rosado üíñ).</li>
        <li>Revisa tu selecci√≥n justo debajo del tablero.</li>
        <li>Pulsa <b>‚ÄúApartar por WhatsApp‚Äù</b> y enviaremos esos n√∫meros en el mensaje.</li>
      </ol>

      <div id="board" class="board" role="grid" aria-label="Cuadr√≠cula de la rifa (00 a 99)"></div>

      <div class="chosen" id="chosen"></div>
      <div class="cta">
        <button id="btnRandom" class="btn random" title="Que la suerte decida">üé≤ S√°came un numerito bacano</button>
        <button id="btnClear" class="btn clear" title="Quitar selecci√≥n">Limpiar selecci√≥n</button>
        <button id="btnWhats" class="btn whats">üì≤ Apartar por WhatsApp</button>
      </div>

      <p class="note" style="text-align:center">Publicaremos aqu√≠ el <b>n√∫mero ganador</b> durante una semana despu√©s del sorteo.</p>
      <div id="winning" hidden></div>
    </section>
  </main>

  <footer>
    <small>Organizan: <b>Yurany y Majo</b>. Reglas: gana quien coincida con las 2 √∫ltimas cifras del premio mayor de la Loter√≠a de Medell√≠n del 5 de septiembre.</small>
  </footer>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    const WHATS_NUMBER = "573234219862";
    const disponibles = [ "10", "12", "15", "23", "26", "31", "33", "39", "41", "42", "43", "44", "46", "49", "50", "53", "54", "55", "60", "61", "64", "65", "68", "71", "74", "75", "76", "78", "80", "81", "83", "84", "88", "90", "92", "93", "94", "96"];

    // ======= Tema (light/dark) =======
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme') || 'dark';
    if(savedTheme==='dark'){ root.setAttribute('data-theme','dark'); themeToggle.checked=true; }
    else{ root.removeAttribute('data-theme'); themeToggle.checked=false; }
    themeToggle.addEventListener('change',()=>{
      if(themeToggle.checked){ root.setAttribute('data-theme','dark'); localStorage.setItem('theme','dark'); }
      else{ root.removeAttribute('data-theme'); localStorage.setItem('theme','light'); }
    });

    const board = document.getElementById('board');
    const chosenBox = document.getElementById('chosen');
    const picked = new Set();

    const numbers = Array.from({length:100},(_,i)=>String(i).padStart(2,'0'));

    function toast(msg){
      const el = document.getElementById('toast');
      el.innerHTML = msg;
      el.classList.add('show');
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(()=>el.classList.remove('show'), 2200);
    }

    function paintChosen(){
      chosenBox.innerHTML='';
      if(picked.size===0){ chosenBox.innerHTML='<span style="color:var(--muted)">Sin selecci√≥n</span>'; return; }
      [...picked].sort().forEach(n=>{
        const s=document.createElement('span'); s.className='chip'; s.textContent=n; chosenBox.appendChild(s);
      });
    }

    function render(){
      board.innerHTML='';
      numbers.forEach(n=>{
        const sold=!disponibles.includes(n);
        const cell=document.createElement('button');
        cell.type='button';
        cell.className='cell'+(sold?' sold':'')+(picked.has(n)?' picked':'');
        cell.textContent=n;
        cell.disabled=sold;
        cell.id = `cell-${n}`;
        cell.onclick=()=>{
          if(sold) return;
          if(picked.has(n)) picked.delete(n); else picked.add(n);
          cell.classList.toggle('picked');
          paintChosen();
        };
        board.appendChild(cell);
      });
      paintChosen();
    }

    // Random picker (tono colombiano)
    document.getElementById('btnRandom').onclick=()=>{
      const pool = disponibles.filter(n=>!picked.has(n));
      if(pool.length===0){ toast('‚ö†Ô∏è Ya elegiste todos los disponibles.'); return; }
      const n = pool[Math.floor(Math.random()*pool.length)];
      picked.add(n);
      const el = document.getElementById(`cell-${n}`);
      if(el){ el.classList.add('picked'); el.scrollIntoView({behavior:'smooth', block:'center'}); }
      paintChosen();
      toast(`Te sali√≥ un <b>numerito bacano</b>: <b>${n}</b> ‚Äî ¬°ap√°rtalo de una!`);
    };

    document.getElementById('btnClear').onclick=()=>{ picked.clear(); render(); };

    document.getElementById('btnWhats').onclick=()=>{
      const arr=[...picked].sort();
      const msg = arr.length
        ? `Hola üëã, quiero participar en la *S√∫per Rifa del Oso* organizada por Yurany y Majo. Deseo apartar los n√∫meros: ${arr.join(', ')}. ¬øMe confirmas por favor?`
        : `Hola üëã, quiero participar en la *S√∫per Rifa del Oso* organizada por Yurany y Majo. ¬øCu√°les n√∫meros tienes disponibles? Quiero elegir y apartar.`;
      const url=`https://api.whatsapp.com/send?phone=${WHATS_NUMBER}&text=${encodeURIComponent(msg)}`;
      window.open(url,'_blank');
    };

    const ganador=new URLSearchParams(location.hash.slice(1)).get('ganador');
    if(ganador){
      const win=document.getElementById('winning');
      win.hidden=false; win.textContent=`N√∫mero ganador: ${String(ganador).padStart(2,'0')}. Visible durante una semana.`;
    }

    render();
  </script>
</body>
</html>
